ai:
  model: gemini-2.5-flash
source_defaults:
  csv_encoding: utf-8
sources:
  gcp_legacy_db:
    type: mysql
    host: 35.196.136.21
    port: 3306
    database: soda_hackathon_db
    user: manraaj
    password: Dartmouth1234(
    query: SELECT * FROM RAW_TRANSACTIONS;
  snowflake_prod:
    type: snowflake
    account: ${SNOWFLAKE_ACCOUNT}
    user: ${SNOWFLAKE_USER}
    password: ${SNOWFLAKE_PASSWORD}
    role: ACCOUNTADMIN
    warehouse: SODA_WH
    database: HACKATHON_DB
    schema: PUBLIC
    query: "SELECT * FROM INTERNAL_TRANSACTIONS"
sinks:
  google_sheet_live:
    type: googlesheets
    spreadsheet_id: "1R5HOJNnHx-5Lih1T2GCYEpn-La6e3CIK2i21qOGtYiA"
    worksheet_name: Sheet1
    credentials_path: /home/manraaj06s/.sodacan-creds/gcp-service-key.json
  google_sheet_bi:
    type: googlesheets
    spreadsheet_id: "1p7k5j7OSQJfSdaVx5ag4rVmowwcllfkT4s8-FiHFyTI"
    worksheet_name: Sheet1
    credentials_path: /home/manraaj06s/.sodacan-creds/gcp-service-key.json
  gcs_datalake:
    type: gcs_parquet
    bucket_name: sodacan-datalake
    blob_path: clean_data/raw_transactions_clean.parquet
    credentials_path: /home/manraaj06s/.sodacan-creds/gcp-service-key.json
  snowflake_prod:
    type: snowflake
    auto_connect: true
    account: ${SNOWFLAKE_ACCOUNT}
    user: ${SNOWFLAKE_USER}
    password: ${SNOWFLAKE_PASSWORD}
    role: ACCOUNTADMIN
    warehouse: SODA_WH
    database: HACKATHON_DB
    schema: PUBLIC
  excel:
    type: excel
    output_dir: ./client_exports/
tasks:
  categorize_transaction:
    prompt_template: 'You are a finance expert. Categorize this transaction: {row_dict}

      Use one of these categories: ''Office Supplies'', ''Software'', ''Travel'',
      ''Food'', ''Other''.

      Provide only the category name.

      '
    output_field: category
  merge_10Q:
    prompt_template: "You are an expert financial analyst. I am providing you with\
      \ a quarterly 10-Q report. \nYour task is to extract two types of information\
      \ and return a clean JSON array.\n\n1.  **Structured Data:** Find the 'Revenues'\
      \ table disaggregated by segment (e.g., 'Google Services', 'Google Cloud').\n\
      2.  **Unstructured Data:** Go to the 'Management's Discussion and Analysis'\
      \ (MD&A) section. For each business segment, find the *single key sentence*\
      \ that *explains the reason* for its revenue performance (growth or decline).\n\
      \n**Output Format:**\nReturn a JSON array. For each segment, create an object\
      \ with these exact fields:\n* `Company`: \"{company}\"\n* `Business_Segment`:\
      \ The segment name (e.g., \"Google Cloud\")\n* `Quarter`: \"{quarter}\"\n* `Revenue_Millions`:\
      \ The revenue for that segment (in millions).\n* `Commentary`: The key sentence\
      \ you extracted from the MD&A about that segment.\n\nOnly return the JSON array.\n"
    output_type: json
preview:
  max_rows: 10
